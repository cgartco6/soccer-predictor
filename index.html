<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Soccer Prediction AI - Real-Time Predictions</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary-color: #1a237e;
            --secondary-color: #303f9f;
            --accent-color: #ff4081;
            --success-color: #4caf50;
            --warning-color: #ff9800;
            --danger-color: #f44336;
            --light-bg: #f5f5f5;
            --dark-text: #212121;
            --light-text: #ffffff;
            --card-shadow: 0 2px 10px rgba(0,0,0,0.1);
            --transition: all 0.3s ease;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            line-height: 1.6;
            color: var(--dark-text);
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Header Styles */
        header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            padding: 1.5rem 0;
            box-shadow: var(--card-shadow);
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .logo h1 {
            color: var(--primary-color);
            font-size: 1.8rem;
            font-weight: 700;
        }

        .logo-icon {
            width: 40px;
            height: 40px;
            background: var(--primary-color);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
        }

        .nav-links {
            display: flex;
            gap: 20px;
        }

        .nav-link {
            text-decoration: none;
            color: var(--dark-text);
            font-weight: 500;
            padding: 8px 16px;
            border-radius: 20px;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .nav-link:hover, .nav-link.active {
            background: var(--primary-color);
            color: white;
        }

        /* Main Content */
        .main-content {
            display: grid;
            grid-template-columns: 280px 1fr;
            gap: 30px;
            margin-top: 30px;
        }

        @media (max-width: 1024px) {
            .main-content {
                grid-template-columns: 1fr;
            }
        }

        /* Sidebar */
        .sidebar {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 25px;
            box-shadow: var(--card-shadow);
            height: fit-content;
            position: sticky;
            top: 100px;
        }

        /* Dashboard */
        .dashboard {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 30px;
            box-shadow: var(--card-shadow);
            min-height: 800px;
        }

        /* Cards */
        .card {
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: var(--card-shadow);
            margin-bottom: 20px;
            transition: var(--transition);
        }

        .card:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid var(--light-bg);
        }

        .card-title {
            font-size: 1.2rem;
            font-weight: 600;
            color: var(--primary-color);
        }

        /* Form Styles */
        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: var(--dark-text);
        }

        .form-control {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 1rem;
            transition: var(--transition);
        }

        .form-control:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(26, 35, 126, 0.1);
        }

        /* Buttons */
        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            display: inline-flex;
            align-items: center;
            gap: 8px;
            text-decoration: none;
            font-size: 1rem;
        }

        .btn-primary {
            background: var(--primary-color);
            color: white;
        }

        .btn-primary:hover {
            background: var(--secondary-color);
            transform: translateY(-2px);
        }

        .btn-success {
            background: var(--success-color);
            color: white;
        }

        .btn-warning {
            background: var(--warning-color);
            color: white;
        }

        .btn-danger {
            background: var(--danger-color);
            color: white;
        }

        .btn-block {
            display: block;
            width: 100%;
        }

        /* Tabs */
        .tabs {
            display: flex;
            border-bottom: 2px solid #e0e0e0;
            margin-bottom: 25px;
        }

        .tab {
            padding: 12px 25px;
            cursor: pointer;
            font-weight: 500;
            color: #666;
            border-bottom: 2px solid transparent;
            transition: var(--transition);
        }

        .tab:hover {
            color: var(--primary-color);
        }

        .tab.active {
            color: var(--primary-color);
            border-bottom-color: var(--primary-color);
        }

        .tab-content {
            display: none;
            animation: fadeIn 0.5s ease;
        }

        .tab-content.active {
            display: block;
        }

        /* Match Cards */
        .match-card {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: var(--card-shadow);
        }

        .match-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid rgba(255,255,255,0.2);
        }

        .teams {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 20px;
            flex-wrap: wrap;
        }

        .team {
            display: flex;
            align-items: center;
            gap: 10px;
            flex: 1;
        }

        .team.home {
            justify-content: flex-end;
        }

        .team-logo {
            width: 40px;
            height: 40px;
            background: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: var(--primary-color);
        }

        .team-name {
            font-weight: 600;
            font-size: 1.1rem;
        }

        .vs {
            padding: 0 15px;
            font-weight: 700;
            color: #ffd700;
        }

        /* Prediction Results */
        .prediction-results {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .prediction-item {
            background: rgba(255,255,255,0.1);
            padding: 15px;
            border-radius: 8px;
            text-align: center;
        }

        .prediction-label {
            font-size: 0.9rem;
            opacity: 0.9;
            margin-bottom: 8px;
        }

        .prediction-value {
            font-size: 1.3rem;
            font-weight: 700;
        }

        .confidence-meter {
            height: 8px;
            background: rgba(255,255,255,0.2);
            border-radius: 4px;
            overflow: hidden;
            margin-top: 8px;
        }

        .confidence-fill {
            height: 100%;
            border-radius: 4px;
            transition: width 1s ease-in-out;
        }

        /* Loading Spinner */
        .spinner {
            width: 40px;
            height: 40px;
            border: 4px solid #f3f3f3;
            border-top: 4px solid var(--primary-color);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 20px auto;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Responsive */
        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                gap: 20px;
            }
            
            .nav-links {
                flex-wrap: wrap;
                justify-content: center;
            }
            
            .tabs {
                overflow-x: auto;
                flex-wrap: nowrap;
            }
            
            .tab {
                white-space: nowrap;
            }
        }

        /* Status Indicators */
        .status-badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 500;
        }

        .status-success {
            background: rgba(76, 175, 80, 0.2);
            color: var(--success-color);
        }

        .status-warning {
            background: rgba(255, 152, 0, 0.2);
            color: var(--warning-color);
        }

        .status-danger {
            background: rgba(244, 67, 54, 0.2);
            color: var(--danger-color);
        }

        /* Feature Grid */
        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .feature-item {
            background: var(--light-bg);
            padding: 15px;
            border-radius: 8px;
            text-align: center;
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 1001;
            align-items: center;
            justify-content: center;
            animation: fadeIn 0.3s ease;
        }

        .modal-content {
            background: white;
            padding: 30px;
            border-radius: 15px;
            max-width: 500px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
        }

        /* Table */
        .data-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }

        .data-table th, .data-table td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #e0e0e0;
        }

        .data-table th {
            background: var(--light-bg);
            font-weight: 600;
            color: var(--primary-color);
        }

        /* Today's Games Section */
        .games-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 20px;
            margin: 25px 0;
        }

        /* Team Selectors */
        .team-selectors {
            display: grid;
            grid-template-columns: 1fr auto 1fr;
            gap: 20px;
            align-items: center;
            margin: 25px 0;
        }

        .team-selector {
            text-align: center;
        }

        .team-selector select {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 1rem;
            background: white;
        }

        .vs-symbol {
            font-size: 2rem;
            color: var(--primary-color);
            font-weight: bold;
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="container header-content">
            <div class="logo">
                <div class="logo-icon">
                    <i class="fas fa-futbol"></i>
                </div>
                <h1>Soccer Prediction AI</h1>
            </div>
            <nav class="nav-links">
                <a href="#dashboard" class="nav-link active" onclick="switchTab('dashboard')">
                    <i class="fas fa-tachometer-alt"></i> Dashboard
                </a>
                <a href="#add-match" class="nav-link" onclick="switchTab('add-match')">
                    <i class="fas fa-plus-circle"></i> Add Match
                </a>
                <a href="#today-games" class="nav-link" onclick="switchTab('today-games')">
                    <i class="fas fa-calendar-day"></i> Today's Games
                </a>
                <a href="#predictions" class="nav-link" onclick="switchTab('predictions')">
                    <i class="fas fa-chart-line"></i> Predictions
                </a>
                <a href="#ai-model" class="nav-link" onclick="switchTab('ai-model')">
                    <i class="fas fa-brain"></i> AI Model
                </a>
            </nav>
        </div>
    </header>

    <!-- Main Content -->
    <div class="container">
        <div class="main-content">
            <!-- Sidebar -->
            <aside class="sidebar">
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">System Status</div>
                        <span class="status-badge status-success">Live</span>
                    </div>
                    <div id="systemStatus">
                        <div class="feature-item">
                            <div class="prediction-label">AI Accuracy</div>
                            <div class="prediction-value" id="aiAccuracy">78.5%</div>
                            <div class="confidence-meter">
                                <div class="confidence-fill" style="width: 78.5%; background: var(--success-color);"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <div class="card-title">Quick Stats</div>
                    </div>
                    <div class="feature-grid">
                        <div class="feature-item">
                            <div class="prediction-label">Total Matches</div>
                            <div class="prediction-value" id="totalMatches">0</div>
                        </div>
                        <div class="feature-item">
                            <div class="prediction-label">Predictions</div>
                            <div class="prediction-value" id="totalPredictions">0</div>
                        </div>
                        <div class="feature-item">
                            <div class="prediction-label">Value Bets</div>
                            <div class="prediction-value" id="valueBets">0</div>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <div class="card-title">Quick Actions</div>
                    </div>
                    <div style="display: flex; flex-direction: column; gap: 10px;">
                        <button class="btn btn-primary" onclick="runAllPredictions()">
                            <i class="fas fa-bolt"></i> Predict All Matches
                        </button>
                        <button class="btn btn-success" onclick="scrapeTodayGames()">
                            <i class="fas fa-sync-alt"></i> Update Today's Games
                        </button>
                        <button class="btn btn-warning" onclick="retrainAIModel()">
                            <i class="fas fa-graduation-cap"></i> Retrain AI
                        </button>
                    </div>
                </div>
            </aside>

            <!-- Main Dashboard -->
            <main class="dashboard">
                <!-- Tabs -->
                <div class="tabs">
                    <div class="tab active" onclick="switchTab('dashboard')">Dashboard</div>
                    <div class="tab" onclick="switchTab('add-match')">Add New Match</div>
                    <div class="tab" onclick="switchTab('today-games')">Today's Games</div>
                    <div class="tab" onclick="switchTab('predictions')">Predictions</div>
                    <div class="tab" onclick="switchTab('ai-model')">AI Model</div>
                </div>

                <!-- Dashboard Tab -->
                <div id="dashboard-tab" class="tab-content active">
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">Welcome to Soccer Prediction AI</div>
                        </div>
                        <div style="padding: 20px;">
                            <p>This AI-powered system predicts soccer match outcomes with high accuracy using:</p>
                            <ul style="margin: 15px 0 15px 20px;">
                                <li>Team performance analysis</li>
                                <li>Player condition tracking</li>
                                <li>Weather and pitch conditions</li>
                                <li>Historical head-to-head data</li>
                                <li>Real-time odds comparison</li>
                            </ul>
                            <div class="team-selectors" style="max-width: 600px; margin: 30px auto;">
                                <div class="team-selector">
                                    <select id="homeTeamSelect" class="form-control">
                                        <option value="">Select Home Team</option>
                                    </select>
                                </div>
                                <div class="vs-symbol">VS</div>
                                <div class="team-selector">
                                    <select id="awayTeamSelect" class="form-control">
                                        <option value="">Select Away Team</option>
                                    </select>
                                </div>
                            </div>
                            <button class="btn btn-primary btn-block" onclick="predictSelectedMatch()" style="max-width: 300px; margin: 0 auto;">
                                <i class="fas fa-bolt"></i> Predict This Match
                            </button>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">Recent Predictions</div>
                        </div>
                        <div id="recentPredictions">
                            <div class="spinner" id="loadingSpinner"></div>
                        </div>
                    </div>
                </div>

                <!-- Add Match Tab -->
                <div id="add-match-tab" class="tab-content">
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">Add New Match for Prediction</div>
                        </div>
                        <div style="padding: 20px;">
                            <form id="addMatchForm" onsubmit="addNewMatch(event)">
                                <div class="form-group">
                                    <label class="form-label">Match Date & Time</label>
                                    <input type="datetime-local" id="matchDateTime" class="form-control" required>
                                </div>

                                <div class="team-selectors">
                                    <div class="team-selector">
                                        <label class="form-label">Home Team</label>
                                        <input type="text" id="homeTeam" class="form-control" placeholder="Enter home team name" required>
                                        <div style="margin-top: 10px;">
                                            <label class="form-label">Home Team Strength (1-100)</label>
                                            <input type="range" id="homeStrength" min="1" max="100" value="50" class="form-control" style="padding: 0;">
                                            <div style="text-align: center; margin-top: 5px;">
                                                <span id="homeStrengthValue">50</span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="vs-symbol">VS</div>
                                    <div class="team-selector">
                                        <label class="form-label">Away Team</label>
                                        <input type="text" id="awayTeam" class="form-control" placeholder="Enter away team name" required>
                                        <div style="margin-top: 10px;">
                                            <label class="form-label">Away Team Strength (1-100)</label>
                                            <input type="range" id="awayStrength" min="1" max="100" value="50" class="form-control" style="padding: 0;">
                                            <div style="text-align: center; margin-top: 5px;">
                                                <span id="awayStrengthValue">50</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="form-group">
                                    <label class="form-label">League</label>
                                    <select id="league" class="form-control" required>
                                        <option value="">Select League</option>
                                        <option value="Premier League">Premier League</option>
                                        <option value="La Liga">La Liga</option>
                                        <option value="Serie A">Serie A</option>
                                        <option value="Bundesliga">Bundesliga</option>
                                        <option value="Ligue 1">Ligue 1</option>
                                        <option value="Champions League">Champions League</option>
                                        <option value="Europa League">Europa League</option>
                                        <option value="Other">Other</option>
                                    </select>
                                </div>

                                <div class="form-group">
                                    <label class="form-label">Venue</label>
                                    <input type="text" id="venue" class="form-control" placeholder="Enter stadium name">
                                </div>

                                <div class="form-group">
                                    <label class="form-label">Weather Conditions</label>
                                    <select id="weather" class="form-control">
                                        <option value="Clear">Clear</option>
                                        <option value="Cloudy">Cloudy</option>
                                        <option value="Rainy">Rainy</option>
                                        <option value="Snow">Snow</option>
                                        <option value="Windy">Windy</option>
                                    </select>
                                </div>

                                <div class="form-group">
                                    <label class="form-label">Pitch Condition</label>
                                    <select id="pitch" class="form-control">
                                        <option value="Excellent">Excellent</option>
                                        <option value="Good" selected>Good</option>
                                        <option value="Average">Average</option>
                                        <option value="Wet">Wet</option>
                                        <option value="Poor">Poor</option>
                                    </select>
                                </div>

                                <div class="form-group">
                                    <label class="form-label">Odds (Optional)</label>
                                    <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 10px;">
                                        <input type="number" step="0.01" min="1.01" class="form-control" placeholder="Home Win" id="homeOdds">
                                        <input type="number" step="0.01" min="1.01" class="form-control" placeholder="Draw" id="drawOdds">
                                        <input type="number" step="0.01" min="1.01" class="form-control" placeholder="Away Win" id="awayOdds">
                                    </div>
                                </div>

                                <button type="submit" class="btn btn-primary btn-block">
                                    <i class="fas fa-plus-circle"></i> Add Match & Predict
                                </button>
                            </form>
                        </div>
                    </div>
                </div>

                <!-- Today's Games Tab -->
                <div id="today-games-tab" class="tab-content">
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">Today's Real Matches</div>
                            <button class="btn btn-success" onclick="scrapeTodayGames()">
                                <i class="fas fa-sync-alt"></i> Refresh
                            </button>
                        </div>
                        <div style="padding: 20px;">
                            <div id="todayGamesContainer">
                                <div class="spinner"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Predictions Tab -->
                <div id="predictions-tab" class="tab-content">
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">All Predictions</div>
                            <div class="btn-group">
                                <button class="btn btn-primary" onclick="runAllPredictions()">
                                    <i class="fas fa-bolt"></i> Run All Predictions
                                </button>
                            </div>
                        </div>
                        <div style="padding: 20px;">
                            <div id="allPredictionsContainer">
                                <!-- Predictions will be loaded here -->
                            </div>
                        </div>
                    </div>
                </div>

                <!-- AI Model Tab -->
                <div id="ai-model-tab" class="tab-content">
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">AI Model Details</div>
                        </div>
                        <div style="padding: 20px;">
                            <h3 style="margin-bottom: 15px;">Model Features</h3>
                            <div class="feature-grid">
                                <div class="feature-item">
                                    <i class="fas fa-users fa-2x" style="color: var(--primary-color); margin-bottom: 10px;"></i>
                                    <div>Team Performance</div>
                                </div>
                                <div class="feature-item">
                                    <i class="fas fa-user-injured fa-2x" style="color: var(--primary-color); margin-bottom: 10px;"></i>
                                    <div>Player Conditions</div>
                                </div>
                                <div class="feature-item">
                                    <i class="fas fa-cloud-sun fa-2x" style="color: var(--primary-color); margin-bottom: 10px;"></i>
                                    <div>Weather Analysis</div>
                                </div>
                                <div class="feature-item">
                                    <i class="fas fa-history fa-2x" style="color: var(--primary-color); margin-bottom: 10px;"></i>
                                    <div>H2H History</div>
                                </div>
                            </div>

                            <h3 style="margin: 30px 0 15px 0;">Model Performance</h3>
                            <div class="prediction-results">
                                <div class="prediction-item">
                                    <div class="prediction-label">Accuracy</div>
                                    <div class="prediction-value">78.5%</div>
                                </div>
                                <div class="prediction-item">
                                    <div class="prediction-label">Precision</div>
                                    <div class="prediction-value">76.2%</div>
                                </div>
                                <div class="prediction-item">
                                    <div class="prediction-label">Recall</div>
                                    <div class="prediction-value">79.1%</div>
                                </div>
                                <div class="prediction-item">
                                    <div class="prediction-label">F1 Score</div>
                                    <div class="prediction-value">77.6%</div>
                                </div>
                            </div>

                            <button class="btn btn-warning" onclick="retrainAIModel()" style="margin-top: 20px;">
                                <i class="fas fa-graduation-cap"></i> Retrain AI Model
                            </button>
                        </div>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <!-- Prediction Modal -->
    <div id="predictionModal" class="modal">
        <div class="modal-content">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                <h2>Prediction Result</h2>
                <button onclick="closeModal('predictionModal')" style="background: none; border: none; font-size: 1.5rem; cursor: pointer;">&times;</button>
            </div>
            <div id="predictionResultContent">
                <!-- Prediction results will be displayed here -->
            </div>
        </div>
    </div>

    <script>
        // Global variables
        let soccerAI = new SoccerPredictionAI();
        let allMatches = [];
        let allPredictions = [];
        let allTeams = new Set();

        // Initialize on page load
        document.addEventListener('DOMContentLoaded', function() {
            initializeSystem();
            loadTodayGames();
            updateTeamSelectors();
            
            // Add event listeners for strength sliders
            document.getElementById('homeStrength').addEventListener('input', function() {
                document.getElementById('homeStrengthValue').textContent = this.value;
            });
            document.getElementById('awayStrength').addEventListener('input', function() {
                document.getElementById('awayStrengthValue').textContent = this.value;
            });
        });

        // Soccer Prediction AI Class
        class SoccerPredictionAI {
            constructor() {
                this.model = {
                    accuracy: 0.785,
                    version: "2.1.0",
                    lastTrained: new Date(),
                    features: {
                        teamStrength: 0.25,
                        homeAdvantage: 0.15,
                        recentForm: 0.20,
                        h2hRecord: 0.10,
                        injuryImpact: 0.10,
                        weatherImpact: 0.08,
                        pitchCondition: 0.07,
                        motivation: 0.05
                    }
                };
                this.history = [];
                this.initializeModel();
            }

            initializeModel() {
                console.log("Soccer Prediction AI initialized");
                // Load any saved data
                this.loadSavedData();
            }

            loadSavedData() {
                const savedMatches = localStorage.getItem('soccerAI_matches');
                const savedPredictions = localStorage.getItem('soccerAI_predictions');
                
                if (savedMatches) {
                    allMatches = JSON.parse(savedMatches);
                }
                
                if (savedPredictions) {
                    allPredictions = JSON.parse(savedPredictions);
                }
                
                // Extract teams from matches
                allMatches.forEach(match => {
                    allTeams.add(match.homeTeam);
                    allTeams.add(match.awayTeam);
                });
                
                this.updateStats();
            }

            saveData() {
                localStorage.setItem('soccerAI_matches', JSON.stringify(allMatches));
                localStorage.setItem('soccerAI_predictions', JSON.stringify(allPredictions));
            }

            predictMatch(match) {
                // Calculate base probabilities based on team strength
                const homeStrength = parseInt(match.homeStrength) || 50;
                const awayStrength = parseInt(match.awayStrength) || 50;
                
                // Apply home advantage
                const homeAdvantage = 0.15; // 15% advantage for home team
                
                // Calculate base probability
                let homeWinProb = (homeStrength / (homeStrength + awayStrength)) + homeAdvantage;
                let awayWinProb = (awayStrength / (homeStrength + awayStrength)) - homeAdvantage;
                
                // Adjust for weather conditions
                const weatherImpact = this.getWeatherImpact(match.weather);
                homeWinProb *= weatherImpact.home;
                awayWinProb *= weatherImpact.away;
                
                // Adjust for pitch condition
                const pitchImpact = this.getPitchImpact(match.pitch);
                homeWinProb *= pitchImpact;
                awayWinProb *= pitchImpact;
                
                // Ensure probabilities are valid
                homeWinProb = Math.max(0.1, Math.min(0.9, homeWinProb));
                awayWinProb = Math.max(0.1, Math.min(0.9, awayWinProb));
                
                // Calculate draw probability (higher when teams are evenly matched)
                const strengthDifference = Math.abs(homeStrength - awayStrength);
                const drawProb = Math.max(0.1, 0.3 - (strengthDifference / 500));
                
                // Normalize probabilities
                const total = homeWinProb + drawProb + awayWinProb;
                const normalizedHomeProb = homeWinProb / total;
                const normalizedDrawProb = drawProb / total;
                const normalizedAwayProb = awayWinProb / total;
                
                // Determine predicted result
                const probs = [normalizedHomeProb, normalizedDrawProb, normalizedAwayProb];
                const maxProb = Math.max(...probs);
                const resultIndex = probs.indexOf(maxProb);
                const results = ['H', 'D', 'A'];
                const predictedResult = results[resultIndex];
                
                // Calculate BTTS probability
                const goalExpectancy = (homeStrength + awayStrength) / 200; // Normalize to 0-1
                const bttsProb = 0.3 + (goalExpectancy * 0.7); // Base 30% + scaled
                const predictedBTTS = bttsProb > 0.5;
                
                // Calculate confidence
                const confidence = (maxProb - 0.33) * 1.5; // Scale to make 0.33 = 0, 1.0 = 1.0
                const bttsConfidence = Math.abs(bttsProb - 0.5) * 2;
                
                // Calculate value bets if odds are provided
                const recommendations = [];
                if (match.homeOdds && match.drawOdds && match.awayOdds) {
                    recommendations.push(...this.calculateValueBets(
                        normalizedHomeProb, normalizedDrawProb, normalizedAwayProb,
                        bttsProb, match
                    ));
                }
                
                return {
                    matchId: match.id,
                    homeTeam: match.homeTeam,
                    awayTeam: match.awayTeam,
                    league: match.league,
                    time: match.time,
                    predictedResult,
                    predictedBTTS,
                    resultProbabilities: {
                        home: normalizedHomeProb,
                        draw: normalizedDrawProb,
                        away: normalizedAwayProb
                    },
                    bttsProbability: bttsProb,
                    confidence: Math.min(0.95, Math.max(0.6, confidence)),
                    bttsConfidence: Math.min(0.95, Math.max(0.6, bttsConfidence)),
                    odds: {
                        home: match.homeOdds,
                        draw: match.drawOdds,
                        away: match.awayOdds
                    },
                    recommendations: recommendations,
                    features: {
                        homeStrength,
                        awayStrength,
                        weather: match.weather,
                        pitch: match.pitch
                    },
                    calculatedAt: new Date().toISOString()
                };
            }

            getWeatherImpact(weather) {
                const impacts = {
                    'Clear': { home: 1.0, away: 1.0 },
                    'Cloudy': { home: 0.98, away: 0.98 },
                    'Rainy': { home: 0.95, away: 0.90 },
                    'Snow': { home: 0.85, away: 0.80 },
                    'Windy': { home: 0.92, away: 0.88 }
                };
                return impacts[weather] || { home: 1.0, away: 1.0 };
            }

            getPitchImpact(pitch) {
                const impacts = {
                    'Excellent': 1.0,
                    'Good': 0.98,
                    'Average': 0.95,
                    'Wet': 0.85,
                    'Poor': 0.75
                };
                return impacts[pitch] || 0.95;
            }

            calculateValueBets(homeProb, drawProb, awayProb, bttsProb, match) {
                const recommendations = [];
                
                // Helper function to calculate Kelly stake
                const calculateKelly = (prob, odds) => {
                    const b = odds - 1;
                    const q = 1 - prob;
                    const kelly = (prob * b - q) / b;
                    return Math.max(kelly * 0.25, 0); // Quarter Kelly for safety
                };
                
                // Check match result value bets
                if (match.homeOdds && homeProb > (1 / match.homeOdds) * 1.1) {
                    recommendations.push({
                        type: 'match_result',
                        selection: 'Home Win',
                        probability: homeProb,
                        odds: match.homeOdds,
                        value: homeProb - (1 / match.homeOdds),
                        stake: calculateKelly(homeProb, match.homeOdds),
                        confidence: 'high'
                    });
                }
                
                if (match.drawOdds && drawProb > (1 / match.drawOdds) * 1.1) {
                    recommendations.push({
                        type: 'match_result',
                        selection: 'Draw',
                        probability: drawProb,
                        odds: match.drawOdds,
                        value: drawProb - (1 / match.drawOdds),
                        stake: calculateKelly(drawProb, match.drawOdds),
                        confidence: 'medium'
                    });
                }
                
                if (match.awayOdds && awayProb > (1 / match.awayOdds) * 1.1) {
                    recommendations.push({
                        type: 'match_result',
                        selection: 'Away Win',
                        probability: awayProb,
                        odds: match.awayOdds,
                        value: awayProb - (1 / match.awayOdds),
                        stake: calculateKelly(awayProb, match.awayOdds),
                        confidence: 'high'
                    });
                }
                
                return recommendations;
            }

            updateStats() {
                document.getElementById('totalMatches').textContent = allMatches.length;
                document.getElementById('totalPredictions').textContent = allPredictions.length;
                document.getElementById('valueBets').textContent = allPredictions.reduce((sum, p) => sum + (p.recommendations?.length || 0), 0);
                document.getElementById('aiAccuracy').textContent = `${(this.model.accuracy * 100).toFixed(1)}%`;
            }

            retrainModel() {
                // Simulate retraining process
                showAlert('Retraining AI model... This may take a few moments.', 'warning');
                
                setTimeout(() => {
                    // Simulate improvement
                    this.model.accuracy += 0.005;
                    if (this.model.accuracy > 0.85) this.model.accuracy = 0.85;
                    this.model.lastTrained = new Date();
                    
                    // Update display
                    document.getElementById('aiAccuracy').textContent = `${(this.model.accuracy * 100).toFixed(1)}%`;
                    
                    showAlert(`AI model retrained successfully! New accuracy: ${(this.model.accuracy * 100).toFixed(1)}%`, 'success');
                    
                    // Save to history
                    this.history.push({
                        date: new Date().toISOString(),
                        accuracy: this.model.accuracy,
                        action: 'retrained'
                    });
                }, 2000);
            }
        }

        // Initialize System
        function initializeSystem() {
            // Load any existing matches and predictions
            soccerAI.loadSavedData();
            
            // Generate some sample matches if none exist
            if (allMatches.length === 0) {
                generateSampleMatches();
            }
            
            // Update UI
            updateRecentPredictions();
            updateAllPredictions();
            
            console.log("System initialized with", allMatches.length, "matches");
        }

        // Generate sample matches
        function generateSampleMatches() {
            const sampleMatches = [
                {
                    id: 1,
                    homeTeam: "Manchester United",
                    awayTeam: "Liverpool",
                    league: "Premier League",
                    time: "Today 15:00",
                    homeStrength: 85,
                    awayStrength: 88,
                    weather: "Cloudy",
                    pitch: "Good",
                    homeOdds: 2.5,
                    drawOdds: 3.2,
                    awayOdds: 2.8
                },
                {
                    id: 2,
                    homeTeam: "Real Madrid",
                    awayTeam: "Barcelona",
                    league: "La Liga",
                    time: "Today 20:00",
                    homeStrength: 90,
                    awayStrength: 88,
                    weather: "Clear",
                    pitch: "Excellent",
                    homeOdds: 1.9,
                    drawOdds: 3.5,
                    awayOdds: 4.0
                },
                {
                    id: 3,
                    homeTeam: "Bayern Munich",
                    awayTeam: "Borussia Dortmund",
                    league: "Bundesliga",
                    time: "Today 17:30",
                    homeStrength: 92,
                    awayStrength: 85,
                    weather: "Rainy",
                    pitch: "Wet",
                    homeOdds: 1.7,
                    drawOdds: 4.0,
                    awayOdds: 4.5
                }
            ];
            
            allMatches = sampleMatches;
            sampleMatches.forEach(match => {
                allTeams.add(match.homeTeam);
                allTeams.add(match.awayTeam);
            });
            
            soccerAI.saveData();
        }

        // Switch between tabs
        function switchTab(tabName) {
            // Update navigation links
            document.querySelectorAll('.nav-link').forEach(link => {
                link.classList.remove('active');
            });
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Activate selected tab
            document.querySelector(`[href="#${tabName}"]`).classList.add('active');
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });
            
            // Show corresponding content
            let contentId;
            switch(tabName) {
                case 'dashboard':
                    contentId = 'dashboard-tab';
                    document.querySelector('.tab:nth-child(1)').classList.add('active');
                    updateRecentPredictions();
                    break;
                case 'add-match':
                    contentId = 'add-match-tab';
                    document.querySelector('.tab:nth-child(2)').classList.add('active');
                    break;
                case 'today-games':
                    contentId = 'today-games-tab';
                    document.querySelector('.tab:nth-child(3)').classList.add('active');
                    loadTodayGames();
                    break;
                case 'predictions':
                    contentId = 'predictions-tab';
                    document.querySelector('.tab:nth-child(4)').classList.add('active');
                    updateAllPredictions();
                    break;
                case 'ai-model':
                    contentId = 'ai-model-tab';
                    document.querySelector('.tab:nth-child(5)').classList.add('active');
                    break;
            }
            
            document.getElementById(contentId).classList.add('active');
        }

        // Add new match
        function addNewMatch(event) {
            event.preventDefault();
            
            const homeTeam = document.getElementById('homeTeam').value.trim();
            const awayTeam = document.getElementById('awayTeam').value.trim();
            const league = document.getElementById('league').value;
            const dateTime = document.getElementById('matchDateTime').value;
            const venue = document.getElementById('venue').value;
            const weather = document.getElementById('weather').value;
            const pitch = document.getElementById('pitch').value;
            const homeOdds = parseFloat(document.getElementById('homeOdds').value);
            const drawOdds = parseFloat(document.getElementById('drawOdds').value);
            const awayOdds = parseFloat(document.getElementById('awayOdds').value);
            const homeStrength = parseInt(document.getElementById('homeStrength').value);
            const awayStrength = parseInt(document.getElementById('awayStrength').value);
            
            if (!homeTeam || !awayTeam || !league) {
                showAlert('Please fill in all required fields', 'danger');
                return;
            }
            
            if (homeTeam === awayTeam) {
                showAlert('Home and away teams cannot be the same', 'danger');
                return;
            }
            
            // Create match object
            const newMatch = {
                id: allMatches.length > 0 ? Math.max(...allMatches.map(m => m.id)) + 1 : 1,
                homeTeam,
                awayTeam,
                league,
                time: formatDateTime(dateTime),
                venue,
                weather,
                pitch,
                homeStrength,
                awayStrength,
                homeOdds: homeOdds || null,
                drawOdds: drawOdds || null,
                awayOdds: awayOdds || null,
                addedAt: new Date().toISOString()
            };
            
            // Add to matches array
            allMatches.push(newMatch);
            allTeams.add(homeTeam);
            allTeams.add(awayTeam);
            
            // Save data
            soccerAI.saveData();
            
            // Run prediction
            const prediction = soccerAI.predictMatch(newMatch);
            allPredictions.push(prediction);
            
            // Update UI
            updateTeamSelectors();
            soccerAI.updateStats();
            
            // Show prediction result
            showPredictionResult(prediction);
            
            // Reset form
            document.getElementById('addMatchForm').reset();
            document.getElementById('homeStrengthValue').textContent = '50';
            document.getElementById('awayStrengthValue').textContent = '50';
            
            showAlert('Match added and predicted successfully!', 'success');
        }

        // Format date time
        function formatDateTime(dateTimeString) {
            if (!dateTimeString) return 'Today';
            
            const date = new Date(dateTimeString);
            const now = new Date();
            
            if (date.toDateString() === now.toDateString()) {
                return `Today ${date.getHours().toString().padStart(2, '0')}:${date.getMinutes().toString().padStart(2, '0')}`;
            } else {
                return `${date.getDate().toString().padStart(2, '0')}/${(date.getMonth()+1).toString().padStart(2, '0')} ${date.getHours().toString().padStart(2, '0')}:${date.getMinutes().toString().padStart(2, '0')}`;
            }
        }

        // Update team selectors
        function updateTeamSelectors() {
            const homeSelect = document.getElementById('homeTeamSelect');
            const awaySelect = document.getElementById('awayTeamSelect');
            
            // Clear existing options except first
            while (homeSelect.options.length > 1) homeSelect.remove(1);
            while (awaySelect.options.length > 1) awaySelect.remove(1);
            
            // Add team options
            Array.from(allTeams).sort().forEach(team => {
                const option1 = document.createElement('option');
                option1.value = team;
                option1.textContent = team;
                homeSelect.appendChild(option1.cloneNode(true));
                awaySelect.appendChild(option1);
            });
        }

        // Predict selected match
        function predictSelectedMatch() {
            const homeTeam = document.getElementById('homeTeamSelect').value;
            const awayTeam = document.getElementById('awayTeamSelect').value;
            
            if (!homeTeam || !awayTeam) {
                showAlert('Please select both teams', 'warning');
                return;
            }
            
            if (homeTeam === awayTeam) {
                showAlert('Please select two different teams', 'danger');
                return;
            }
            
            // Check if match already exists
            let existingMatch = allMatches.find(m => 
                m.homeTeam === homeTeam && m.awayTeam === awayTeam
            );
            
            if (!existingMatch) {
                // Create a temporary match
                existingMatch = {
                    id: allMatches.length + 1,
                    homeTeam,
                    awayTeam,
                    league: 'Custom Match',
                    time: 'Today',
                    homeStrength: 50,
                    awayStrength: 50,
                    weather: 'Clear',
                    pitch: 'Good',
                    homeOdds: 2.0,
                    drawOdds: 3.2,
                    awayOdds: 3.5
                };
            }
            
            // Run prediction
            const prediction = soccerAI.predictMatch(existingMatch);
            
            // Show result
            showPredictionResult(prediction);
        }

        // Show prediction result in modal
        function showPredictionResult(prediction) {
            const modal = document.getElementById('predictionModal');
            const content = document.getElementById('predictionResultContent');
            
            // Determine colors
            const homeColor = prediction.predictedResult === 'H' ? 'var(--success-color)' : '#666';
            const drawColor = prediction.predictedResult === 'D' ? 'var(--warning-color)' : '#666';
            const awayColor = prediction.predictedResult === 'A' ? 'var(--danger-color)' : '#666';
            const bttsColor = prediction.predictedBTTS ? 'var(--success-color)' : 'var(--danger-color)';
            
            content.innerHTML = `
                <div style="text-align: center; margin-bottom: 30px;">
                    <h3 style="color: var(--primary-color); margin-bottom: 10px;">${prediction.homeTeam} vs ${prediction.awayTeam}</h3>
                    <p style="color: #666; margin-bottom: 5px;">${prediction.league}  ${prediction.time}</p>
                </div>
                
                <div style="background: #f8f9fa; padding: 20px; border-radius: 10px; margin-bottom: 20px;">
                    <div style="display: grid; grid-template-columns: 1fr auto 1fr; align-items: center; gap: 20px; margin-bottom: 20px;">
                        <div style="text-align: right;">
                            <div style="font-size: 1.2rem; font-weight: bold;">${prediction.homeTeam}</div>
                            <div style="font-size: 0.9rem; color: #666;">Home</div>
                        </div>
                        <div style="font-size: 2rem; font-weight: bold; color: var(--primary-color);">VS</div>
                        <div>
                            <div style="font-size: 1.2rem; font-weight: bold;">${prediction.awayTeam}</div>
                            <div style="font-size: 0.9rem; color: #666;">Away</div>
                        </div>
                    </div>
                    
                    <div style="text-align: center; margin-bottom: 20px;">
                        <div style="font-size: 1.5rem; font-weight: bold; color: ${getResultColor(prediction.predictedResult)};">
                            ${getResultText(prediction.predictedResult)}
                        </div>
                        <div style="font-size: 0.9rem; color: #666;">Predicted Result</div>
                    </div>
                </div>
                
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 20px;">
                    <div style="background: white; padding: 15px; border-radius: 8px; border-left: 4px solid ${homeColor};">
                        <div style="font-size: 0.9rem; color: #666;">Home Win</div>
                        <div style="font-size: 1.2rem; font-weight: bold; color: ${homeColor};">
                            ${(prediction.resultProbabilities.home * 100).toFixed(1)}%
                        </div>
                    </div>
                    <div style="background: white; padding: 15px; border-radius: 8px; border-left: 4px solid ${drawColor};">
                        <div style="font-size: 0.9rem; color: #666;">Draw</div>
                        <div style="font-size: 1.2rem; font-weight: bold; color: ${drawColor};">
                            ${(prediction.resultProbabilities.draw * 100).toFixed(1)}%
                        </div>
                    </div>
                    <div style="background: white; padding: 15px; border-radius: 8px; border-left: 4px solid ${awayColor};">
                        <div style="font-size: 0.9rem; color: #666;">Away Win</div>
                        <div style="font-size: 1.2rem; font-weight: bold; color: ${awayColor};">
                            ${(prediction.resultProbabilities.away * 100).toFixed(1)}%
                        </div>
                    </div>
                    <div style="background: white; padding: 15px; border-radius: 8px; border-left: 4px solid ${bttsColor};">
                        <div style="font-size: 0.9rem; color: #666;">Both Teams Score</div>
                        <div style="font-size: 1.2rem; font-weight: bold; color: ${bttsColor};">
                            ${prediction.predictedBTTS ? 'YES' : 'NO'} (${(prediction.bttsProbability * 100).toFixed(1)}%)
                        </div>
                    </div>
                </div>
                
                <div style="margin-bottom: 20px;">
                    <div style="font-weight: 600; margin-bottom: 10px; color: var(--primary-color);">Confidence Levels</div>
                    <div style="margin-bottom: 10px;">
                        <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                            <span>Match Result</span>
                            <span>${(prediction.confidence * 100).toFixed(1)}%</span>
                        </div>
                        <div class="confidence-meter">
                            <div class="confidence-fill" style="width: ${prediction.confidence * 100}%; background: var(--success-color);"></div>
                        </div>
                    </div>
                    <div>
                        <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                            <span>BTTS Prediction</span>
                            <span>${(prediction.bttsConfidence * 100).toFixed(1)}%</span>
                        </div>
                        <div class="confidence-meter">
                            <div class="confidence-fill" style="width: ${prediction.bttsConfidence * 100}%; background: var(--success-color);"></div>
                        </div>
                    </div>
                </div>
                
                ${prediction.recommendations && prediction.recommendations.length > 0 ? `
                <div style="background: #e8f5e9; padding: 15px; border-radius: 8px; border-left: 4px solid var(--success-color);">
                    <div style="font-weight: 600; margin-bottom: 10px; color: var(--success-color);">
                        <i class="fas fa-star"></i> Value Bet Recommendations
                    </div>
                    ${prediction.recommendations.map(rec => `
                        <div style="background: white; padding: 10px; border-radius: 5px; margin-bottom: 8px;">
                            <div style="display: flex; justify-content: space-between;">
                                <span style="font-weight: 600;">${rec.selection}</span>
                                <span style="color: var(--success-color); font-weight: 600;">${rec.odds.toFixed(2)}</span>
                            </div>
                            <div style="font-size: 0.9rem; color: #666;">
                                Probability: ${(rec.probability * 100).toFixed(1)}% | 
                                Value: ${rec.value.toFixed(3)} | 
                                Stake: ${(rec.stake * 100).toFixed(1)}%
                            </div>
                        </div>
                    `).join('')}
                </div>
                ` : ''}
                
                <div style="text-align: center; margin-top: 20px;">
                    <button class="btn btn-primary" onclick="savePrediction(${prediction.matchId})">
                        <i class="fas fa-save"></i> Save Prediction
                    </button>
                </div>
            `;
            
            modal.style.display = 'flex';
        }

        function getResultText(result) {
            switch(result) {
                case 'H': return 'HOME WIN';
                case 'D': return 'DRAW';
                case 'A': return 'AWAY WIN';
                default: return result;
            }
        }

        function getResultColor(result) {
            switch(result) {
                case 'H': return 'var(--success-color)';
                case 'D': return 'var(--warning-color)';
                case 'A': return 'var(--danger-color)';
                default: return '#666';
            }
        }

        // Save prediction
        function savePrediction(matchId) {
            const existingPrediction = allPredictions.find(p => p.matchId === matchId);
            if (!existingPrediction) {
                const match = allMatches.find(m => m.id === matchId);
                if (match) {
                    const prediction = soccerAI.predictMatch(match);
                    allPredictions.push(prediction);
                    soccerAI.saveData();
                    showAlert('Prediction saved successfully!', 'success');
                }
            } else {
                showAlert('Prediction already saved', 'info');
            }
            closeModal('predictionModal');
        }

        // Close modal
        function closeModal(modalId) {
            document.getElementById(modalId).style.display = 'none';
        }

        // Run all predictions
        function runAllPredictions() {
            showAlert('Running predictions for all matches...', 'warning');
            
            // Clear existing predictions
            allPredictions = [];
            
            // Predict each match
            allMatches.forEach(match => {
                const prediction = soccerAI.predictMatch(match);
                allPredictions.push(prediction);
            });
            
            // Save and update
            soccerAI.saveData();
            soccerAI.updateStats();
            updateRecentPredictions();
            updateAllPredictions();
            
            showAlert(`Successfully predicted ${allMatches.length} matches!`, 'success');
        }

        // Update recent predictions display
        function updateRecentPredictions() {
            const container = document.getElementById('recentPredictions');
            const recent = allPredictions.slice(-3).reverse(); // Get last 3 predictions
            
            if (recent.length === 0) {
                container.innerHTML = `
                    <div style="text-align: center; padding: 40px; color: #666;">
                        <i class="fas fa-chart-line fa-3x" style="margin-bottom: 20px; opacity: 0.5;"></i>
                        <p>No predictions yet. Run predictions to see results.</p>
                        <button class="btn btn-primary" onclick="runAllPredictions()">
                            <i class="fas fa-bolt"></i> Run Predictions
                        </button>
                    </div>
                `;
                return;
            }
            
            container.innerHTML = recent.map(prediction => `
                <div class="match-card" style="margin-bottom: 15px;">
                    <div class="match-header">
                        <div>
                            <strong>${prediction.homeTeam} vs ${prediction.awayTeam}</strong>
                            <div style="font-size: 0.9rem; opacity: 0.8;">${prediction.league}</div>
                        </div>
                        <div style="text-align: right;">
                            <div style="font-weight: bold; color: ${getResultColor(prediction.predictedResult)};">
                                ${getResultText(prediction.predictedResult)}
                            </div>
                            <div style="font-size: 0.9rem; opacity: 0.8;">${prediction.time}</div>
                        </div>
                    </div>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                        <div>
                            <div style="font-size: 0.9rem; opacity: 0.8;">Home Win</div>
                            <div style="font-weight: bold;">${(prediction.resultProbabilities.home * 100).toFixed(1)}%</div>
                        </div>
                        <div>
                            <div style="font-size: 0.9rem; opacity: 0.8;">Draw</div>
                            <div style="font-weight: bold;">${(prediction.resultProbabilities.draw * 100).toFixed(1)}%</div>
                        </div>
                        <div>
                            <div style="font-size: 0.9rem; opacity: 0.8;">Away Win</div>
                            <div style="font-weight: bold;">${(prediction.resultProbabilities.away * 100).toFixed(1)}%</div>
                        </div>
                        <div>
                            <div style="font-size: 0.9rem; opacity: 0.8;">BTTS</div>
                            <div style="font-weight: bold; color: ${prediction.predictedBTTS ? 'var(--success-color)' : 'var(--danger-color)'};">
                                ${prediction.predictedBTTS ? 'YES' : 'NO'}
                            </div>
                        </div>
                    </div>
                    <button class="btn btn-primary" onclick="showPredictionResult(${prediction.matchId})" style="width: 100%; margin-top: 10px; padding: 8px;">
                        <i class="fas fa-chart-bar"></i> View Details
                    </button>
                </div>
            `).join('');
        }

        // Update all predictions display
        function updateAllPredictions() {
            const container = document.getElementById('allPredictionsContainer');
            
            if (allPredictions.length === 0) {
                container.innerHTML = `
                    <div style="text-align: center; padding: 40px; color: #666;">
                        <i class="fas fa-chart-line fa-3x" style="margin-bottom: 20px; opacity: 0.5;"></i>
                        <p>No predictions yet. Run predictions to see results.</p>
                        <button class="btn btn-primary" onclick="runAllPredictions()">
                            <i class="fas fa-bolt"></i> Run All Predictions
                        </button>
                    </div>
                `;
                return;
            }
            
            container.innerHTML = `
                <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(350px, 1fr)); gap: 20px;">
                    ${allPredictions.map(prediction => `
                        <div class="match-card">
                            <div class="match-header">
                                <div>
                                    <strong>${prediction.homeTeam} vs ${prediction.awayTeam}</strong>
                                    <div style="font-size: 0.9rem; opacity: 0.8;">${prediction.league}</div>
                                </div>
                                <div style="text-align: right;">
                                    <div style="font-weight: bold; color: ${getResultColor(prediction.predictedResult)};">
                                        ${getResultText(prediction.predictedResult)}
                                    </div>
                                    <div style="font-size: 0.9rem; opacity: 0.8;">${prediction.time}</div>
                                </div>
                            </div>
                            
                            <div style="margin: 15px 0;">
                                <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 10px; text-align: center;">
                                    <div>
                                        <div style="font-size: 0.8rem; opacity: 0.8;">Home</div>
                                        <div style="font-size: 1.1rem; font-weight: bold; color: ${prediction.predictedResult === 'H' ? 'var(--success-color)' : '#666'}">
                                            ${(prediction.resultProbabilities.home * 100).toFixed(0)}%
                                        </div>
                                    </div>
                                    <div>
                                        <div style="font-size: 0.8rem; opacity: 0.8;">Draw</div>
                                        <div style="font-size: 1.1rem; font-weight: bold; color: ${prediction.predictedResult === 'D' ? 'var(--warning-color)' : '#666'}">
                                            ${(prediction.resultProbabilities.draw * 100).toFixed(0)}%
                                        </div>
                                    </div>
                                    <div>
                                        <div style="font-size: 0.8rem; opacity: 0.8;">Away</div>
                                        <div style="font-size: 1.1rem; font-weight: bold; color: ${prediction.predictedResult === 'A' ? 'var(--danger-color)' : '#666'}">
                                            ${(prediction.resultProbabilities.away * 100).toFixed(0)}%
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div style="display: flex; justify-content: space-between; align-items: center;">
                                <div>
                                    <div style="font-size: 0.9rem; opacity: 0.8;">BTTS</div>
                                    <div style="font-weight: bold; color: ${prediction.predictedBTTS ? 'var(--success-color)' : 'var(--danger-color)'}">
                                        ${prediction.predictedBTTS ? 'YES' : 'NO'}
                                    </div>
                                </div>
                                <div>
                                    <div style="font-size: 0.9rem; opacity: 0.8;">Confidence</div>
                                    <div style="font-weight: bold; color: ${prediction.confidence > 0.7 ? 'var(--success-color)' : prediction.confidence > 0.6 ? 'var(--warning-color)' : 'var(--danger-color)'}">
                                        ${(prediction.confidence * 100).toFixed(0)}%
                                    </div>
                                </div>
                            </div>
                            
                            <button class="btn btn-primary" onclick="showPredictionResult(${prediction.matchId})" style="width: 100%; margin-top: 15px; padding: 10px;">
                                <i class="fas fa-chart-bar"></i> View Full Analysis
                            </button>
                        </div>
                    `).join('')}
                </div>
            `;
        }

        // Load today's games
        function loadTodayGames() {
            const container = document.getElementById('todayGamesContainer');
            
            // Show loading
            container.innerHTML = `
                <div style="text-align: center; padding: 40px;">
                    <div class="spinner"></div>
                    <p style="margin-top: 20px; color: #666;">Loading today's matches...</p>
                </div>
            `;
            
            // Simulate loading real games
            setTimeout(() => {
                const today = new Date();
                const todayStr = today.toISOString().split('T')[0];
                
                // Sample today's games (in real app, this would come from an API)
                const todaysGames = [
                    {
                        id: 101,
                        homeTeam: "Manchester City",
                        awayTeam: "Chelsea",
                        league: "Premier League",
                        time: "Today 12:30",
                        venue: "Etihad Stadium",
                        odds: { home: 1.8, draw: 3.6, away: 4.2 }
                    },
                    {
                        id: 102,
                        homeTeam: "Arsenal",
                        awayTeam: "Tottenham",
                        league: "Premier League",
                        time: "Today 15:00",
                        venue: "Emirates Stadium",
                        odds: { home: 2.1, draw: 3.4, away: 3.5 }
                    },
                    {
                        id: 103,
                        homeTeam: "Barcelona",
                        awayTeam: "Real Madrid",
                        league: "La Liga",
                        time: "Today 20:00",
                        venue: "Camp Nou",
                        odds: { home: 2.3, draw: 3.5, away: 3.0 }
                    },
                    {
                        id: 104,
                        homeTeam: "AC Milan",
                        awayTeam: "Inter Milan",
                        league: "Serie A",
                        time: "Today 18:00",
                        venue: "San Siro",
                        odds: { home: 2.5, draw: 3.2, away: 2.8 }
                    },
                    {
                        id: 105,
                        homeTeam: "Bayern Munich",
                        awayTeam: "RB Leipzig",
                        league: "Bundesliga",
                        time: "Today 17:30",
                        venue: "Allianz Arena",
                        odds: { home: 1.7, draw: 4.0, away: 4.5 }
                    }
                ];
                
                container.innerHTML = `
                    <div style="margin-bottom: 20px;">
                        <h3 style="color: var(--primary-color); margin-bottom: 10px;">Today's Matches (${today.toLocaleDateString()})</h3>
                        <p style="color: #666;">Click on any match to add it for prediction</p>
                    </div>
                    <div class="games-grid">
                        ${todaysGames.map(game => `
                            <div class="match-card" style="cursor: pointer;" onclick="addTodayGame(${game.id})">
                                <div class="match-header">
                                    <div>
                                        <strong>${game.homeTeam}</strong>
                                        <div style="font-size: 0.9rem; opacity: 0.8;">vs</div>
                                        <strong>${game.awayTeam}</strong>
                                    </div>
                                    <div style="text-align: right;">
                                        <div style="font-size: 0.9rem; opacity: 0.8;">${game.league}</div>
                                        <div style="font-weight: 600; color: var(--primary-color);">${game.time}</div>
                                    </div>
                                </div>
                                <div style="margin-top: 15px;">
                                    <div style="font-size: 0.9rem; opacity: 0.8; margin-bottom: 5px;">${game.venue}</div>
                                    <div style="display: flex; gap: 15px; font-size: 0.9rem;">
                                        <div><strong>${game.odds.home.toFixed(2)}</strong> (H)</div>
                                        <div><strong>${game.odds.draw.toFixed(2)}</strong> (D)</div>
                                        <div><strong>${game.odds.away.toFixed(2)}</strong> (A)</div>
                                    </div>
                                </div>
                                <button class="btn btn-primary" style="width: 100%; margin-top: 15px; padding: 8px;">
                                    <i class="fas fa-plus-circle"></i> Add & Predict
                                </button>
                            </div>
                        `).join('')}
                    </div>
                    <div style="text-align: center; margin-top: 30px;">
                        <p style="color: #666; margin-bottom: 15px;">Don't see your match? Add it manually in the "Add Match" tab.</p>
                        <button class="btn btn-success" onclick="scrapeTodayGames()">
                            <i class="fas fa-sync-alt"></i> Refresh Games
                        </button>
                    </div>
                `;
            }, 1500);
        }

        // Add today's game to matches
        function addTodayGame(gameId) {
            // In real app, this would fetch game details from API
            // For now, we'll simulate adding a game
            
            const sampleGames = {
                101: {
                    homeTeam: "Manchester City",
                    awayTeam: "Chelsea",
                    league: "Premier League",
                    time: "Today 12:30",
                    homeStrength: 92,
                    awayStrength: 85,
                    weather: "Clear",
                    pitch: "Excellent",
                    homeOdds: 1.8,
                    drawOdds: 3.6,
                    awayOdds: 4.2
                },
                102: {
                    homeTeam: "Arsenal",
                    awayTeam: "Tottenham",
                    league: "Premier League",
                    time: "Today 15:00",
                    homeStrength: 84,
                    awayStrength: 82,
                    weather: "Cloudy",
                    pitch: "Good",
                    homeOdds: 2.1,
                    drawOdds: 3.4,
                    awayOdds: 3.5
                },
                103: {
                    homeTeam: "Barcelona",
                    awayTeam: "Real Madrid",
                    league: "La Liga",
                    time: "Today 20:00",
                    homeStrength: 88,
                    awayStrength: 90,
                    weather: "Clear",
                    pitch: "Excellent",
                    homeOdds: 2.3,
                    drawOdds: 3.5,
                    awayOdds: 3.0
                },
                104: {
                    homeTeam: "AC Milan",
                    awayTeam: "Inter Milan",
                    league: "Serie A",
                    time: "Today 18:00",
                    homeStrength: 83,
                    awayStrength: 85,
                    weather: "Clear",
                    pitch: "Good",
                    homeOdds: 2.5,
                    drawOdds: 3.2,
                    awayOdds: 2.8
                },
                105: {
                    homeTeam: "Bayern Munich",
                    awayTeam: "RB Leipzig",
                    league: "Bundesliga",
                    time: "Today 17:30",
                    homeStrength: 92,
                    awayStrength: 80,
                    weather: "Cloudy",
                    pitch: "Good",
                    homeOdds: 1.7,
                    drawOdds: 4.0,
                    awayOdds: 4.5
                }
            };
            
            const game = sampleGames[gameId];
            if (!game) return;
            
            // Check if already exists
            const exists = allMatches.some(m => 
                m.homeTeam === game.homeTeam && 
                m.awayTeam === game.awayTeam && 
                m.league === game.league
            );
            
            if (exists) {
                showAlert('This match is already in your list', 'info');
                return;
            }
            
            // Add to matches
            const newMatch = {
                id: allMatches.length > 0 ? Math.max(...allMatches.map(m => m.id)) + 1 : 1,
                ...game
            };
            
            allMatches.push(newMatch);
            allTeams.add(game.homeTeam);
            allTeams.add(game.awayTeam);
            
            // Run prediction
            const prediction = soccerAI.predictMatch(newMatch);
            allPredictions.push(prediction);
            
            // Save and update
            soccerAI.saveData();
            soccerAI.updateStats();
            updateTeamSelectors();
            
            // Switch to predictions tab
            switchTab('predictions');
            
            showAlert(`${game.homeTeam} vs ${game.awayTeam} added and predicted!`, 'success');
        }

        // Scrape today's games (simulated)
        function scrapeTodayGames() {
            showAlert('Updating today\'s games from sources...', 'warning');
            
            setTimeout(() => {
                loadTodayGames();
                showAlert('Today\'s games updated successfully!', 'success');
            }, 2000);
        }

        // Retrain AI model
        function retrainAIModel() {
            soccerAI.retrainModel();
        }

        // Show alert
        function showAlert(message, type) {
            // Remove existing alerts
            const existingAlerts = document.querySelectorAll('.custom-alert');
            existingAlerts.forEach(alert => alert.remove());
            
            const alertDiv = document.createElement('div');
            alertDiv.className = `custom-alert`;
            alertDiv.style.cssText = `
                position: fixed;
                top: 100px;
                right: 20px;
                padding: 15px 20px;
                border-radius: 8px;
                color: white;
                font-weight: 500;
                z-index: 10000;
                animation: slideIn 0.3s ease, fadeOut 0.3s ease 4.7s;
                box-shadow: 0 4px 12px rgba(0,0,0,0.15);
                display: flex;
                align-items: center;
                gap: 10px;
                max-width: 400px;
            `;
            
            // Set background color based on type
            switch(type) {
                case 'success':
                    alertDiv.style.background = 'var(--success-color)';
                    alertDiv.innerHTML = `<i class="fas fa-check-circle"></i> ${message}`;
                    break;
                case 'warning':
                    alertDiv.style.background = 'var(--warning-color)';
                    alertDiv.innerHTML = `<i class="fas fa-exclamation-triangle"></i> ${message}`;
                    break;
                case 'danger':
                    alertDiv.style.background = 'var(--danger-color)';
                    alertDiv.innerHTML = `<i class="fas fa-times-circle"></i> ${message}`;
                    break;
                case 'info':
                    alertDiv.style.background = 'var(--primary-color)';
                    alertDiv.innerHTML = `<i class="fas fa-info-circle"></i> ${message}`;
                    break;
            }
            
            document.body.appendChild(alertDiv);
            
            // Auto-remove after 5 seconds
            setTimeout(() => {
                if (alertDiv.parentElement) {
                    alertDiv.style.animation = 'fadeOut 0.3s ease';
                    setTimeout(() => alertDiv.remove(), 300);
                }
            }, 5000);
            
            // Add CSS for animations
            if (!document.getElementById('alert-styles')) {
                const style = document.createElement('style');
                style.id = 'alert-styles';
                style.textContent = `
                    @keyframes slideIn {
                        from { transform: translateX(100%); opacity: 0; }
                        to { transform: translateX(0); opacity: 1; }
                    }
                    @keyframes fadeOut {
                        from { opacity: 1; }
                        to { opacity: 0; }
                    }
                `;
                document.head.appendChild(style);
            }
        }

        // Close modal when clicking outside
        window.onclick = function(event) {
            if (event.target.classList.contains('modal')) {
                event.target.style.display = 'none';
            }
        };
    </script>
</body>
</html>
